# Web项目管理与开发规范

> 此仓库内容为`Web`项目基础结构模板, 以此基于框架合理的进行项目规划与管理.

## 一、项目要求
        
  * 工具链一致性 - 小版本(`minor`)可以有些许差异, 大版本(`major`)必须一致.
        
  * 开发工具一致性 - 理论上都需要使用一样的`IDE`或编辑器, 但实际上最终的源码保持一致即可.
        
  * 项目依赖一致性 - 请使用`go.mod`来管理依赖库, 并将依赖库放置到项目的`vendor`目录下. 
        
  * 代码管理一致性 - 使用`coding`、`github`、`gitlab`、`gitee`等平台来管理代码.
        
  * 迭代版本一致性 - 使用`branch`与`tag`分离版本, 用`merge`与`stash`管理冲突与迭代.

## 二、开发规范

### 1. 代码要求

  * 用`Struct`来抽象对象模型, 用`Interface`组合业务功能;
  
  * 已经测试通过的所有代码在发布前, 必须使用`gofmt`修正;
  
  * 已经测试通过的所有代码在发布前, 必须使用`goimports`修正;
  
  * 尽可能不用`panic`来抛出异常, 推荐采用`value, err`方式返回;
  
  * 所有单项错误条件都必须用`if not condition { return }`方式返回;
  
  * 请使用规范的编程命名语法, 并且不允许在项目内混合使用多种命名规范;

### 2. 注释要求

  * 任何无法被一眼看懂的代码, 都需要在上层加上简单的注释;

  * 尽量在业务代码的上层注释，而不是放到本行结尾增加行字符长度;
  
  * 函数与方法的注释要言简意赅、通俗易懂，简述内容应该要包含的用途;
  
  * 针对一些未完成的功能, 一个要打上`TODO`的标志来解释后续功能增加;
  
  * 对象(`struct`)声明的每个属性之后必须跟随注释来说明它们的用途; 

### 3. 数据库要求

  * 数据库表(`table`)创建的时候必须携带注释, 并且用它来描述表在数据库的用途;

  * 数据库字段(`field`)应该尽可能简单易懂, 并且必须存在注释来描述它们的用途;
  
  * 数据库表名称与字段的命名应该使用英文小写+下划线描述, 表的前缀为项目命名简写;
  
  * 主键视情况决定使用`UUID`或者`BIGINT`, 不可存在无主键的数据表;
  
  * 对数据表进行的`CRUD`操作, 都必须在结尾加上`LIMIT`限制执行范围;
  
  * 数据表必须带上`create_time`与`update_time`字段来记录操作时间;

  * 尽可能避免在**大字符串**上增加索引, 更推荐使用整形作为普通索引;
  
  * `join`不可涉及到`3`个以上数据表, `ORDER BY` 的字段不能跨越多个表; 
  
  * 查询语句在需要进行结果集排序时, **条件字段**与**排序字段**必须拥有联合索引;
  
  * 尽可能的不用统计(`COUNT`), 转而采用专门的统计表来将其记录成常量;
  
  * 分组(`GROUP BY`)条件必须带上索引, 并且条件不可为函数计算出来的结果;

### 4. 版本控制

  * 项目的版本控制必须使用`Git`; 前期必须使用平台管理, 后期才会考虑自建平台;
  
  * 使用**分支更迭**原则来管理项目迭代, 分支的生命周期为: 创建->合并->删除;
  
  * 任何代码修改都不能再主分支上进行, 必须在开发、测试完毕后合并(`merge`)到主分支;
  
  * 每次提交代码之前先拉取一次最新的分支, 合理利用暂存(`stash`)解决代码/版本冲突问题;
  
  * 针对每次提交的代码都必须增加提交说明, 用来表达此次对代码修改的用途与意义;